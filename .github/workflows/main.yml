name: CI
on:
  push:
    branches:
      - master

jobs:

  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - name: Run a multi-line script
      run: |
        npm i
        npm run test

  buildAndPublish:
    needs: test
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - name: Build $ Publish
      uses: lbejiuk/adip@v1
      with:
        TOKEN: ${{secrets.token}}
        PACKAGE_REPOSITORY: 'private_pkg'
